---
layout: post
title: "Ubuntu에 개발환경 셋팅하기 (1)"
tags: ['Web']
date: 2014-08-16 16:09:00
---
# Ubuntu에 개발환경 셋팅하기

소프트웨어 마에스트로 프로젝트 서버를 셋팅한다. 서버는 uCloud에서 구매하였다. 서버 스펙은 나중에 추가.

## Server spec

Ubuntu 12.04

## Setting

  * Python
    * pip
    * virtualenv
  * Python libs
    * numpy
    * scipy
    * scikit-learn
    * matplotlib
    * nltk
    * newspaper
    * goose
    * boilerpipe
    * feedparser
  * Flask
  * Redis

libs는 개발하면서 그때그때 설치하는게 맞다고 생각하나, 몇가지는 미리 깔아둠. 

### Python

기본적으로 2.7.3이 깔려 있다.
    
    
    $ python -V
    Python 2.7.3
    

파이썬 최신버전은 2.7.8.

맥이나 리눅스에는 기본적으로 파이썬이 설치되어 있는데, 그건 OS에서 파이썬을 쓰기 때문이다. 많은 부분들이 파이썬으로 코딩되어 있음. 따라서 이 시스템에 설치되어있는 파이썬(이하 시스템 파이썬)을 함부로 건드렸다간 시스템이 망가진다.

특히, [파이썬의 경우 메이저 버전이 다르면 호환이 안되기 때문에 함부로 업그레이드 해서는 안된다.](http://superuser.com/questions/241865/updating-python-on-ubuntu-system) 여기서 말하는 메이저 버전이란 소수점 둘째자리를 의미. 즉 2.6과 2.7은 호환이 안된다.

그러나 나는 최신버전을 쓰고 싶었고 현재 깔려있는 파이썬은 2.7.3으로 메이저 버전은 같았기에 업그레이드를 시도해 보기로 했다.

#### 1차 시도
    
    
    $ apt-get update
    $ apt-get upgrade
    $ apt-get install python2.7
    

실패. 이미 python2.7이 설치되어 있다고 나온다.

#### 2차 시도

[리눅스 Python 2.7 컴파일 설치](http://jmnote.com/wiki/%EB%A6%AC%EB%88%85%EC%8A%A4_Python_2.7_%EC%BB%B4%ED%8C%8C%EC%9D%BC_%EC%84%A4%EC%B9%98)  
이걸 시도해보자. 이건 2.4 -&gt; 2.7이므로 이것보다 수월하게 되리라 기대한다.

##### 다운로드 및 설치

처음부터 막힘. 서버 세팅 문젠지는 몰라도 그냥 wget으로 받아오려면 에러가 난다. 아래처럼 --no-check-certificate 옵션을 추가해 줘야 함. 참고로 -N은 로컬에 있는 파일보다 최신버전만 받는 옵션이다.
    
    
    $ cd /usr/local/src
    $ wget -N --no-check-certificate https://www.python.org/ftp/python/2.7.8/Python-2.7.8.tgz
    $ sudo tar xzf Python-2.7.8.tgz
    $ cd Python-2.7.8/
    $ sudo ./configure
    $ sudo make
    $ sudo make altinstall
    

그러고 나면
    
    
    $ python -V
    Python 2.7.3
    $ /usr/bin/python -V
    Python 2.7.3
    $ /usr/local/bin/python2.7 -V
    Python 2.7.8
    

이렇게 된다.

##### 바꿔치기

자 그럼 대망의 바꿔치기!
    
    
    $ mv /usr/bin/python /usr/bin/python_old
    $ cp /usr/local/bin/python2.7 /usr/bin/python
    $ python -V
    Python 2.7.8
    

잘 되긴 하는데 yum이 안 됨(yum도 파이썬 스크립트임) -&gt; yum이 안 되는줄 알았는데 알고보니 yum은 안 깔려있었다. 기존의 시스템 파이썬 일때는 yum을 깔라고 나오는데 2.7.8에서는 뭐라뭐라 파이썬 에러가 남. 암튼 이것도 뭔가 안된다는거니 문제다. 고치는 방법이 나와있긴 한데 저렇게 다 고칠수는 없는 노릇… 나 혼자 하는 프로젝트도 아니고 팀플젝이니 여기까지만 하도록 한다 -_-

### pip, virtualenv

자 그럼 필요한거나 하자.  
[How to install pip on Ubuntu](http://www.saltycrane.com/blog/2010/02/how-install-pip-ubuntu/)
    
    
    $ sudo apt-get install python-pip python-dev build-essential 
    $ sudo pip install --upgrade pip 
    $ sudo pip install --upgrade virtualenv
    

virtualenv는 우리 프로젝트에서 안 쓸 것 같지만 필수적인 패키지 중 하나니 설치해 둔다.

### python libs

#### numpy, scipy, scikit-learn
    
    
    $ sudo pip install -U numpy scipy scikit-learn
    

에러 -_-
    
    
    Command /usr/bin/python -c "import setuptools, tokenize;__file__='/tmp/pip_build_root/scipy/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /tmp/pip-XQ2E58-record/install-record.txt --single-version-externally-managed --compile failed with error code 1 in /tmp/pip_build_root/scipy
    Traceback (most recent call last):
      File "/usr/local/bin/pip", line 9, in <module>
        load_entry_point('pip==1.5.6', 'console_scripts', 'pip')()
      File "/usr/local/lib/python2.7/dist-packages/pip/__init__.py", line 185, in main
        return command.main(cmd_args)
      File "/usr/local/lib/python2.7/dist-packages/pip/basecommand.py", line 161, in main
        text = '\n'.join(complete_log)
    UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 72: ordinal not in range(128)
    

scipy를 설치하다 에러가 난 듯.

한참 삽질하다 보니 이것보다 윗단에 걸 봐야되는거 같다. 저 에러 위에 이게 있었음
    
    
    numpy.distutils.system_info.BlasNotFoundError:
        Blas (http://www.netlib.org/blas/) libraries not found.
        Directories to search for the libraries can be specified in the
        numpy/distutils/site.cfg file (section [blas]) or by setting
        the BLAS environment variable.
    

즉 blas라이브러리를 깔아야 한댄다. 이거 깔고 나면 lapack 도 깔라고 함.
    
    
    $ sudo apt-get install libblas-dev
    $ sudo apt-get install liblapack-dev
    

로 해결. `apt-get python-numpy python-scipy` 로 하면 쉽게 된다는 거 같은데 여기까지 한 이상 pip로 해보기로 결심함. pip가 더 좋다는 소리도 있다. 왠진 모름 -_-
    
    
    building 'dfftpack' library
    error: library dfftpack has Fortran sources but no Fortran compiler found
    

이젠 별별 에러가 다 난다. 포트란 컴파일러를 깔아주자.
    
    
    $ sudo apt-get install libamd2.2.0 libblas3gf libc6 libgcc1 \
    libgfortran3 liblapack3gf libumfpack5.4.0 libstdc++6 \
    build-essential gfortran python-all-dev \
    libatlas-base-dev
    

뭘 이렇게 많이 설치해야 되는지…

와 **_감동_**. 이러고 설치하면 다 깔린다. 한참 걸리니 터미널을 쳐다보고 있지 말 것을 추천한다. import해서 정상적으로 임포트되는것도 확인.

* * *

오늘의 교훈 : 에러메시지를 꼼꼼히 읽자.

오늘의 과제 : pip와 apt-get의 차이는 무엇인가. apt-get은 리눅스 패키지 관리 툴 아닌가? 그렇다면 왜 pip, 즉 파이썬 패키지까지 얘가 관리하는것인가. 만약 둘다 특정 패키지를 설치할 수 있다면, numpy나 scipy같이, 둘중 아무거나로 깔아도 상관 없는 것인가. 상관 있다면 왜 그런가.


[Tistory 원문보기](http://khanrc.tistory.com/22)
